<!DOCTYPE html>
<html>
<head>
  <title>Lorem Ipsum PRESENTA Plugin</title>
  <script src="https://unpkg.com/presenta-sdk"></script>
  <script src="https://unpkg.com/getlorem@1.0.1/lib/getlorem.js"></script>
  <link rel="stylesheet" href="https://use.typekit.net/vvg5tnq.css">
  <style>
    *{
      box-sizing: border-box;
    }

    body{
      font-family: Lato, sans-serif;
      font-size: 0.8rem;
    }

    input{
      padding:.5rem;
      width: 100%;
      border:none;
      border:1px solid #ddd;
      margin-bottom: 5px;
    }
    button{
      flex:1;
      border:none;
      background-color: black;
      color:white;
      padding: .75rem;
    }
  
    .row{
        padding-top:0.5rem;
        display: flex;
        flex-direction: column;
    }
    
  </style>
</head>
<body>


    <p>This is more a joke than a real plugin because <b>PRESENTA fosters the content-first principle.</b><br />
      We all agree that lorem-ipsum is NOT content by definition.</p>
    <p>Nevertheless, it's a good example to show the potential of a <b>PRESENTA</b> plugin.</p>
    <p>So, what are you waiting for?</p>
    
    
    <div class="row">
      <span>How many slides (10-50)?</span>
      <input id="num" min="10" max="50" value="30" type="range" />
      <input id="name" type="text" placeholder="sign with your name!" />
      <button>Generate!</button>
    </div>

    <p>Want to make a plugin? <a href="https://github.com/presenta-software/plugin-lorem-ipsum" target="_blank">Start from its source code</a>.</p>
    

    <script type="text/javascript">

      function createHeadingSlide(text){
        return {
          text: `<h1>${text}</h1>`, 
          textVariant: 'laya',
          colorVariant: 'varb'
        }
      }

      function createSectionSlide(){
        return {
          text: `<h1>${getlorem.words(4)}</h1>
          <h2>${getlorem.words(7)}</h2>`,
          textVariant: 'layb',
          colorVariant: 'varc'
        }
      }

      function createTextSlide(){
        return {
          text: `<h1>${getlorem.words(4)}</h1>
          <p>${getlorem.sentences(2)}</p>
          <ul>
            <li>${getlorem.words(5)}</li>
            <li>${getlorem.words(6)}</li>
            <li>${getlorem.words(5)}</li>
          </ul>`,
          textVariant: 'layc',
          colorVariant: 'vara'
        }
      }

      document.querySelector('button').addEventListener('click', () => {

        presenta.deleteSlides({all:true})

        let arr = []
        
        let name = document.querySelector('#name').value || 'anonymous'

        arr.push( createHeadingSlide(`Welcome <mark>${name}</mark>. <br />I typed every single char ðŸ˜Ž.`) )

        let num = document.querySelector('#num').value || 30


        let count = 3
        for(var i=0; i < 15; ++i){
          arr.push( createSectionSlide() )
          count++
          if(count > num) break
          
          for(var j=0; j < parseInt(Math.random()*5 + 2); ++j){
            arr.push( createTextSlide() )
            count++
            if(count > num) break
          }
          
        }

        arr.push( createHeadingSlide('Thanks for reading!') )

        console.log(arr.length)

        // send to PRESENTA
        presenta.createSlides({
          slides: arr
        })
      })

    </script>
    
</body>
</html>